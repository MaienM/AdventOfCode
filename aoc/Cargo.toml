[package]
name = "aoc"
version = "0.0.0"
edition = "2021"

[features]
default = []
visual = [
	"puzzle_runner/visual",
	"dep:raqote",
]
bench = [
	"puzzle_runner/bench",
	"dep:criterion",
]
leaderboard = [
	"dep:chrono",
	"dep:serde",
	"dep:serde_json",
]

[dependencies]
# for bench
criterion = { version = "0.5.1", optional = true }

# for visual
raqote = { version = "0.8.3", optional = true }

# for leaderboard
chrono = { version = "0.4.31", optional = true }
serde = { version = "1.0.193", optional = true, features = ["derive"] }
serde_json = { version = "1.0.108", optional = true }

# main
ansi_term = "0.12.1"
puzzle_runner = { path = "../puzzle_runner" }
common_macros = "0.1.1"
derive-new = "0.7"
once_cell = "1.18.0"
paste = "1.0.14"
rayon = "1.8.0"
tap = "1.0.1"
num = "0.4.1"
regex = "1.11.1"
memoize = { git = "https://github.com/MaienM/memoize", version = "0.4.2" }
itertools = "0.14.0"

[dev-dependencies]
pretty_assertions = "1.0.0"

[lints.clippy]
pedantic = { level = "warn", priority = -1 }
match_on_vec_items = "allow"
missing_panics_doc = "allow"
must_use_candidate = "allow"

# There's a lot of casting between different numeric types in this project. In most cases the possible ranges of these are pretty well understood, and as such most of these concerns are unfounded and just add clutter.
cast_possible_truncation = "allow"
cast_possible_wrap = "allow"
cast_precision_loss = "allow"
cast_sign_loss = "allow"

# While this might be more _memory_ efficient it's often not more computationally efficient, and I care far more about
# that in this project than I do about a bit more memory usage (especially since the memory usage of most solutions is
# relatively minimal anyway).
trivially_copy_pass_by_ref = "allow"

[[bin]]
name = "leaderboard"
required-features = ["leaderboard"]

[[bench]]
name = "main"
harness = false
required-features = ["bench"]

[[bench]]
name = "libs"
harness = false
required-features = ["bench"]
